---
title: 开发手册
date: 2020-08-24
tags:
  - 前端
categories:
  - 技术
sticky: { type: true }
---

## 开发手册

    1. 可以使用 'I18N' 这个库来实现国际化
    2. 现在更推荐使用 i18next
    3. 在 react 中可以使用 i18next + react-i18next
    4. 如果要实现搜索结果高亮可以通过遍历搜索出来的结果把结果外面加一个标签,使用 v-html 进行展示
    5. 上拉或下拉容器移动原理是通过 js 动态改变position的位置
    6. 点击哪个选哪个解决方法：动态的加 class 通过 index 和点击时的 activeIndex 相同时就加，实现点哪个选哪个
    7. 点击哪个多选哪个解决方法：判断数组中的变量，如果是 true 就动态的加 class，否则不加，实现多点哪个多选哪个
    8. 动态加载css实现换肤原理，准备多份 css 文件，每次切换时动态的 appendChlid 到 head 中，要删除原有的不然会一直添加
    9. 设置英文的font-size可能会遇到字显示不全的问题，可以通过设置 line-height 解决
    10. 表格列表中的下拉框选中一个后，后面新增的下拉框去除前面选中的思路： 监听表格列表长
        当是添加的时候把当前所有选中的从下拉框中去除掉，并且存进去除的数组中，在删除表格列表时，把删除的数据再添加进下拉框中
    11. 在IE浏览器中不支持Date横杠格式 "2011-06-06" ，需要转换为 "2011/06/06"
    12. 调用微信需要授权的 api 时，第一次都会弹出授权框，getUserInfo 除外，在使用这些需要授权的api时需要注意兼容用户拒绝授权的情况
        使用 getSetting 查看授权情况结合 authorize 进行重新弹框授权
    13. 在有 v-for 的地方使用不了 v-if 可以用动态 class 或 style 的 display: none 代替
        也可以把循环内容放在计算属性里, 在计算属性里把判断条件过滤掉
    14. 在实现swiper的列表数据展示时, 每页的列表都不一样, 如果使用数组每个页面都会重新赋值会出现闪屏的情况
        最好的做法是使用对象存储每页的列表数据, 使用时可能会遇到 vue 动态的给对象的属性或数组的下标赋值不成功
        则需要使用 this.$set 方法赋值, 注意要判断是否已经有值, 避免重复加载同样的数据
    15. 在 webpack 打包的时候，可以在 js 文件中混用 require 和 export，但是不能混用 import 以及 module.exports
        因为 webpack2 中不允许混用 import 和module.exports, 解决办法就是统一改成ES6的方式编写即可
    16. 在安装依赖不成功时，可执行常试清除缓存，删除 package-lock.json 或 yarn.lock 和 node_modules 文件，再重装依赖
        升级 node 版本后，需要清除一下 npm 或 yarn 的缓存
        npm cache clean --force
        yarn cache clean
    17. 在开发微信网页时，如果是安卓手机可以打开 debugx5.qq.com 这个地址清除网页缓存，如果是苹果手机则需要重新登录微信清除网页缓存
    18. 在开发微信网页时，安卓手机打开微信 webview 有缓存导致第二次白屏，解决方法在 webview 链接后加一个时间戳
        切记不能在 webview 页面对 url 做其他操作，会引起其他 bug，如加解密 url
    19. 引用静态文件规范
        uni-app
        在 template 中使用不加 ~@ 的绝对路径，如 '/static/img/1.png'
        在 js 中使用不加 ~ 的绝对路径，如 '@/static/img/1.png'
        在 css 中使用 ~@ 的绝对路径，如 '~@/static/img/1.png'
        vuecli
        在 template 中可以使用 ~@ 的绝对路径，如 '~@/static/img/1.png'
        在 js 中使用不加 ~ 的绝对路径，如 '@/static/img/1.png'
        在 css 中使用 ~@ 的绝对路径，如 '~@/static/img/1.png'
        默认没有 static 目录，而 assets 会经过 webpack 构建
        如果需要通过本地动态切换，需要在 js 中 import ，再使用通过变量切换
    20. 可以使用 npx 命令调用安装的依赖，如 npx mocha --version
    21. 快速删除 node_modules 文件夹
        npm install rimraf -g
        rimraf node_modules
    22. uni.getLocation 获取位置时在 H5 需要使用 winxin-js-sdk 获取
        uni.chooseLocation 打开地图默认位置时在 H5 需要使用腾讯地图组件
    23. 当margin或者padding取值是百分比的时候，无论是left，right或者top，bottom，都是以父元素的width为参考物
    24. 可以使用 json-server 实现 mock 数据
    25. decodeURIComponent 和 encodeURIComponent 是用来对 URI 其中的一部分做转义
        decodeURI 和 encodeURI 是用来对整个 URI 做转义
    26. 如果使用了 ssl 证书，打开 chrome 报 Your connection is not private 不让访问
        一般点击高级选项中可以继续访问，如果不行，可以直接输入 thisisunsafe 即可绕过 ssl 校验
    27. 选中 input 框禁止键盘弹出方法
        1. <input readonly="readonly">
        2. <input onfocus="this.blur()">
        3. <input onfocus="document.activeElement.blur()">
    28. css modules 要覆盖其他组件的样式需要使用 :global 而不是 /deep/
    29. axios 可以捕获到服务端的 401 或 500 异常而 fetch 不能
    30. 前端导出 pdf 可以使用 jspdf + html2canvas 方案，这样会导致在 pdf 中不可复制，因为是一张图片
        在使用 pdf.text 方法设置文字时会中文乱码，需使用自定义字体生成，a4width = 595，a4height = 842
    31. react 项目可以使用 react-beautiful-dnd 做拖拽
        vue 项目可以使用 sortable.js 做表格拖拽
    32. 爬虫：使用 npm install superagent 发送请求获取html，使用 npm install cheerio 解析html
    33. RGB 颜色值中的每一个数值是 0-255，其中每个数值都可以通过 js 的 parseInt(num, 16) 方法传入 16 进制转成 #FF00AA 形式
    34. 如果一个接口在官方能使用的情况下，在别的地方报 500 ，则有可能服务端限制的 header 头中的 host 或 referer 参数
    35. Web Components 可以理解成自定义组件，可以写在 body 中的自定义标签
    36. Object.prototype.toString 可以用来判断变量类型，和普通对象上的 toString 作用不一样
    37. 动态换肤方案
      1. element 换肤
        1. 官网 scss 变量替换（参考官网，不推荐，只能写死，不可动态）
        2. 通过获取对应版本的 element css 样式，再通过正则把对应 color 替换成新的颜色
          （参考 vue-element-admin，不推荐，只能修改主题色，其他的配色修改不了）
          const version = require('element-ui/package.json').version
          const url = `https://unpkg.com/element-ui@${version}/lib/theme-chalk/index.css`
          this.getCSSString(url, chalkHandler, 'chalk')
          getCSSString(url, callback, variable) {
            const xhr = new XMLHttpRequest()
            xhr.onreadystatechange = () => {
              if (xhr.readyState === 4 && xhr.status === 200) {
                this[variable] = xhr.responseText.replace(/@font-face{[^}]+}/, '')
                callback()
              }
            }
            xhr.open('GET', url)
            xhr.send()
          }
        3. 通过官网命令行主题工具 element-theme 生成对应的样式文件
          再配合 gulp-css-wrap 工具给样式文件加上外层命名空间
          （参考官网或 vue-element-admin，推荐使用，也就是说生成了多份的样式文件
            然后使用 js 动态引入对应的样式实现动态换肤）
      2. 本地换肤
        1. 通过 css 变量定义好对应的样式，再使用 js 动态修改对应变量实现动态换肤
      3. 总结
        1. element 换肤通过准备多份本地样式文件进行替换实现动态换肤
        2. 本地换肤通过定义 css 变量进行修改实现动态换肤
    38. nav 标题栏随着滚动渐隐渐现效果实现方式使用 js 监听滚动距离计算出对应的透明度值给到 nav 样式
    39. 除了可以给 <style> 上添加 lang 属性外，还可以给 <template> 和 <script> 添加
    40. 自定义事件
          const myEvent = new CustomEvent('myEvent', { detail: imgList })
          window.dispatchEvent(myEvent)
          window.addEventListener('myEvent', e => {
            console.log(e.detail)
          })
    41. 不同浏览器下的相同的域名使用的 cookie 值不一样，因为每个浏览器的 cookie 的存储方式不一样
    42. 后端通过 set-cookie 方法设置 cookie 后需要加了 path 属性，否则在浏览器中的 application 的 cookie 中看不到对应的值
        如果不设置 path 属性和不设置时间则需要关闭浏览器才可以重置
    43. 兼容性：
        Vue2：IE9 及以上
        Vue3：不支持 IE
        React：IE9 及以上
        ElementUi：IE11 （需要 polyfills）及以上
        Ant Design：IE11 （需要 polyfills）及以上
    44. base64 图片 url 前面要加 `data:image/jpeg;base64,` 后面跟具体的编码
    45. 代码异常会中断后续执行，而错误不会中断
    46. 使用 window.close() 脚本关闭一个窗口的前提是，这个窗口必须是通过脚本打开的，而不是用户打开的
    47. 在管理员 PowerShell 里面通过执行 Get-PhysicalDisk 可以获得硬盘类型
    48. 查看所有全局安装的 npm 模块：npm list -g --depth=0
    49. uni-app 如果是调用非浏览器端的 API，如有兼容问题则需要看对应端的官方问题，uni-app 官方说明不完整
    50. hooks 和 utils 的区别就是 hooks 可以使用生命周期和其他特有的方法（如 ref），utils 不行
    51. 在函数中需要返回异步操作中的值时，除了使用 Promise、Callback 等方式，还可以使用返回一个函数的形式
    52. css currentColor 代表了当前元素被应用上的 color 颜色值，你这可以这么理解，CSS里你可以在任何需要写颜色的地方
        使用currentColor这个变量，这个变量的值是当前元素的color值。如果当前元素没有在CSS里显示地指定一个color值，
        那它的颜色值就遵从CSS规则，从父级元素继承而来
    53. uni.showToast 在2.14.1版本的微信模拟器中，icon 设置为 error 时无效，都会显示 success
    54. WeixinJSBridge 在微信浏览器自带的对象
    55. 使用 rem 时，写 border 时不要使用 rem 转化，直接使用 px，不然会有问题

## 解决 vant-h5 ios 轮播时圆角变直角

    overflow: hidden;
    transform: translateY(0);
    -webkit-mask-image: -webkit-radial-gradient(white, black);

## 生成测试的 ssl 证书

    openssl genrsa -des3 -passout pass:x -out server.pass.key 2048

    openssl rsa -passin pass:x -in server.pass.key -out server.key

    openssl req -new -key server.key -out server.csr

    openssl x509 -req -sha256 -days 3650 -in server.csr -signkey server.key -out server.crt

## 文字溢出省略号

      /* 单行 */
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;

      /* 多行 */
      overflow: hidden;
      text-overflow: ellipsis;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;

## 在 webkit 和 safari 内核的浏览器下隐藏滚动条且可以滚动

      /* webkit 内核 */
      .scroll_content::-webkit-scrollbar {
        width:0px;
        height:0px;
      }
      .scroll_content::-webkit-scrollbar-button    {
        background-color:rgba(0,0,0,0);
      }
      .scroll_content::-webkit-scrollbar-track     {
        background-color:rgba(0,0,0,0);
      }
      .scroll_content::-webkit-scrollbar-track-piece {
        background-color:rgba(0,0,0,0);
      }
      .scroll_content::-webkit-scrollbar-thumb{
        background-color:rgba(0,0,0,0);
      }
      .scroll_content::-webkit-scrollbar-corner {
        background-color:rgba(0,0,0,0);
      }
      .scroll_content::-webkit-scrollbar-resizer  {
        background-color:rgba(0,0,0,0);
      }
      .scroll_content::-webkit-scrollbar {
        width:10px;
        height:10px;
      }
      /* o 内核 */
      .scroll_content .-o-scrollbar{
        -moz-appearance: none !important;
        background: rgba(0,255,0,0) !important;
      }
      .scroll_content::-o-scrollbar-button {
        background-color:rgba(0,0,0,0);
      }
      .scroll_content::-o-scrollbar-track {
        background-color:rgba(0,0,0,0);
      }
      .scroll_content::-o-scrollbar-track-piece {
        background-color:rgba(0,0,0,0);
      }
      .scroll_content::-o-scrollbar-thumb{
        background-color:rgba(0,0,0,0);
      }
      .scroll_content::-o-scrollbar-corner {
        background-color:rgba(0,0,0,0);
      }
      .scroll_content::-o-scrollbar-resizer  {
        background-color:rgba(0,0,0,0);
      }
      /* IE10 IE11 IE12 */
      .scroll_content{
        -ms-scroll-chaining: chained;
        -ms-overflow-style: none;
        -ms-content-zooming: zoom;
        -ms-scroll-rails: none;
        -ms-content-zoom-limit-min: 100%;
        -ms-content-zoom-limit-max: 500%;
        -ms-scroll-snap-type: proximity;
        -ms-scroll-snap-points-x: snapList(100%, 200%, 300%, 400%, 500%);
        -ms-overflow-style: none;
        overflow: auto;
      }

## reset css

    html, body, div, span, applet, object, iframe,
    h1, h2, h3, h4, h5, h6, p, blockquote, pre,
    a, abbr, acronym, address, big, cite, code,
    del, dfn, em, img, ins, kbd, q, s, samp,
    small, strike, strong, sub, sup, tt, var,
    b, u, i, center,
    dl, dt, dd, ol, ul, li,
    fieldset, form, label, legend,
    table, caption, tbody, tfoot, thead, tr, th, td,
    article, aside, canvas, details, embed,
    figure, figcaption, footer, header, hgroup,
    menu, nav, output, ruby, section, summary,
    time, mark, audio, video {
      margin: 0;
      padding: 0;
      border: 0;
      font-size: 100%;
      font: inherit;
      vertical-align: baseline;
    }
    article, aside, details, figcaption, figure,
    footer, header, hgroup, menu, nav, section {
      display: block;
    }
    body {
      line-height: 1;
    }
    ol, ul {
      list-style: none;
    }
    blockquote, q {
      quotes: none;
    }
    blockquote:before, blockquote:after,
    q:before, q:after {
      content: '';
      content: none;
    }
    table {
      border-collapse: collapse;
      border-spacing: 0;
    }

::: tip
作者：chenjie <br>
链接：https://webchenjie.cn <br>
来源：ChenJieBlog
:::
