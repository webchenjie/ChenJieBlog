---
title: Vue-源码知识-Vue3-响应式-介绍
date: 2023-04-08
tags:
    - Vue
categories:
    - 技术
---

## 1. 大纲

-   effect

    -   数据结构（WeakMap）
    -   依赖收集（getter）
    -   依赖触发（setter）

-   reactive

    -   proxy

-   ref

    -   getter
    -   setter

-   computed

-   watch

## 2. 简述

-   reactive 利用 proxy 创建代理对象，getter 进行依赖收集，setter 进行依赖触发

-   ref 如果是复杂对象本质使用的是 proxy，如果是简单对象则就是 class getter setter 主动触发的依赖收集和触发，本身不是响应式的

-   effect 执行时会创建 ReactiveEffect 实例，里面有 run、stop 等方法，run 方法就是执行传入的 fn 函数，即自定义函数，在执行 fn 时会把当前实例保存在全局变量上即 activeEffect 并且触发对应的 getter 操作从而进行依赖收集， 当改变值时会触发 setter 操作从而执行依赖触发的过程

-   computed 通过 ComputedRefImpl 进行创建，然后返回，和 ref 的 RefImpl 类似，也是 class getter setter
