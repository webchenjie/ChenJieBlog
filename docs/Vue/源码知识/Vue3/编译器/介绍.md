---
title: Vue-源码知识-Vue3-编译器-介绍
date: 2023-06-23
tags:
    - Vue
categories:
    - 技术
---

## 简介

所谓的编译器就是 Vue 中的 comiler，它会把 template 转换为 render

主要是三大步骤：

-   解析（parse）template 模板，生成 AST
-   转化（transform）AST，得到 JS AST
-   生成（generate）render 函数

### 什么是 DSL？

-   领域特定语言（DSL）指的仅为某个适用的领域而设计的，并提供解决方案，在 Vue 中可以简单理解为就是把 template 模板编译成 render 函数的过程就是 compiler 编译器

-   正常的编译过程可以理解为把 A 语言转换为 B 语言，即源代码转换为目标代码，流程主要是以下步骤

    -   源代码 ==> 词法分析 ==> 语法分析 ==> 语义分析 ==> 中间代码生成 ==> 中间代码优化 ==> 目标代码生成 ==> 目标代码优化 ==> 目标代码

-   在 Vue 中，把 template 转换为 render 会比较简单些，主要是以下步骤

    -   源代码（template） ==> 错误分析 ==> parse（生成 AST） ==> transform（生成 js AST） ==> 目标代码（render）

### 什么是 AST？

-   抽象语法树（AST）指的是源代码语法结构的一种抽象表示

### 什么是 JS AST？

-   在生成了 AST 后，通过 transform 会生成 JS AST
-   JS AST 和 AST 的主要区别是新增了 codegenNode 节点，即代码生成节点
