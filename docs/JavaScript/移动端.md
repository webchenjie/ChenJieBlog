---
title: 移动端
date: 2020-07-04
---

```js
// 移动端屏幕适配和响应式布局的关系
1. 对应终端不同,移动端仅支持移动端,响应式布局则要支持pc和移动端
2. 常用单位不同,移动端宽高用rem、%,字体用px,响应式布局宽用%,高和字体用px
3. 移动端的宽和高都随着屏幕大小变化等比例变化,响应式布局的宽度变化,高度不变,不等比例
----------------------------------------------------------------------------------------------
// 响应式布局
1. 对于不同屏幕尺寸做出响应,并进行相应布局的一种移动web开发方式
----------------------------------------------------------------------------------------------
// 移动端屏幕适配方案之 lib-flexible / amfe-flexible
1. 1rem = viewWidth / 系数(18.75)
2. 一像素边框问题是由dpr造成的
3. scale(缩放比) = 1 / dpr(设备像素比)
4. 使用rem为单位,且动态的(onresize)改变html的font-size的值
5. 设置viewport
6. 再动态的设置缩放比解决1像素边框问题
7. 视口的缩放比会影响视口的宽
8. 可以限制视频宽来实现最大最小宽
9. 使用 px2rem 自动转换单位
----------------------------------------------------------------------------------------------
// 移动端屏幕适配方案之 viewport
1. 使用 postcss-px-to-viewport 把 px 转换成 vw，配合百分比
----------------------------------------------------------------------------------------------
// 像素
1. 分辨率上的点就是物理像素,又叫设备像素(dp),一个点就是一个三原色(红绿蓝)
2. css像素 = 逻辑像素 = 设备独立像素(dip)
3. css像素在标清屏下中对应一个物理像素
4. css像素在高清屏下对应4个物理像素
5. 设备像素比(dpr) = 设备像素 / css像素
6. dpr > 1都属于高清屏
7. 缩放时是指css像素
8. 每英寸的物理像素点(ppi / dpi)
9. pt也叫物理分辨率, 一个pt会包含一个或多个px
10. pt的大小和屏幕尺寸有关系, 简单可以理解为长度和视觉单位
11. px指逻辑分辨率, 和屏幕尺寸没有关系
12. 设计图给的尺寸是px即逻辑分辨率
13. 在小程序开发中写的px是pt即物理分辨率
14. 在iphone6中 1px = 1rpx = 0.5pt, 所以在iphone6设计图中的 1px = 1rpx
----------------------------------------------------------------------------------------------
// 视口
1. <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no, maximum-scala=1, minimum-scale=1">
2. 设备像素比: window.devicepixelRatio
3. js获取视口宽: documentElement.clientWidth || window.innerWidth
4. 视口可视区默认980px
----------------------------------------------------------------------------------------------
// 媒体查询
1. 针对不同屏幕大小写样式
2. 类型: 1、all全部,2、screen屏幕,3、print打印,4、speech阅读器
3. 逻辑: 1、与(and),2、或(,),3、非(not),在and前加not包括全部,在有‘,’时只包括一种
4. max-width // 最大宽度
5. min-width // 最小宽度
6. -webkit-min-device-pixel-ratio / -webkit-max-device-pixel-ratio //屏幕像素
7. orientation: landscape(横屏) / portrait(竖屏)
8. @media(特征表达式4、5、6、7) {}
----------------------------------------------------------------------------------------------
// 移动端常用单位
1. em相对于本身的字体大小的倍数
2. rem相对于html的字体大小的倍数
3. vw视口宽,vh视口高
----------------------------------------------------------------------------------------------
// 抓包
1. 移动端h5页面,查看网络请求,需要用工具抓包
2. window一般用fiddler
3. mac一般用charles
4. 手机电脑连同一个局域网,将手机代理到电脑上,手机浏览网页即可抓包
5. 可查看网络请求,网址代理,查看https请求
----------------------------------------------------------------------------------------------
// 移动端 H5 click 300ms 延迟
1. 在移动端的浏览器上可以双击屏幕放大，iPhone 的 double tap to zoom，导致点击时会延迟 300ms 延迟
   从而判断是点击还是双击放大
2. 解决方法
  1. 早期使用 FastClick
    1. 监听 touchend 事件（touchstart 和 touchend 会优先 click 触发）
    2. 使用自定义 DOM 事件模拟一个 click 事件
    3. 把默认的 click 事件（300ms 之后触发）禁止掉
  2. 现在的浏览器都支持 meta 标签
    1. <meta name="viewport" content="width=device-width, initial-scale=1.0">
    2. 浏览器检测到有 content="width=device-width" 就表示当前页面有对移动端进行优化
       即 Pc 一套 ui，移动端一套 ui，认为是响应式布局了，从而不需要有 300ms 延迟了
----------------------------------------------------------------------------------------------
// 其他
1. 在做移动端开发时,要移动端优先的写css代码
```
