---
title: 基础知识
date: 2021-07-19
---

```js
// 前端自动化测试产生的背景及原理
1. 正常避免出现 Bug 的手段
  1. CodeReView
  2. 测试同学
  3. 灰度验证
2. 前端避免出现 Bug 的手段
  1. TypeScript
  2. Flow
  3. EsLint
  4. StyleLint
  5. 自动化测试工具
----------------------------------------------------------------------------------------------
// 测试种类
1. 单元测试（常见）
2. 集成测试（常见）
3. 端到端测试（常见）
4. 回归测试
5. 性能测试
6. 压力测试
----------------------------------------------------------------------------------------------
// 前端自动化测试框架
1. Jasmine
2. MoCha + chai
3. Jest
4. 优点
  1. 性能好
  2. 功能强大
  3. 易用性高
----------------------------------------------------------------------------------------------
// Jest 优点
1. 速度快
2. API 简单
3. 易配置
4. 隔离性好
5. 监控模式
6. IDE 整合
7. Snapshot（快照）
8. 多项目并行
9. 覆盖率
10. Mock 丰富
----------------------------------------------------------------------------------------------
// Jest 配置
1. 使用 Jest 时，需要使用模块化代码测试如 ESM、CJS
2. npm install jest
3. npx jest --init // 生成 jest.config.js 配置文件，如果不配置会走默认配置
4. npx jest --coverage // 生成覆盖率文件
5. 在 package.json 的 script 脚本中添加 "test": "jest --watch"，运行 npm run test 就会自动测试
6. Jest 命令行（只有开启了 --watch 才有效）
  1. w 键：进入或退出选择命令
  2. f 键：只会跑未通过的测试用例，已通过的不会再跑，默认是全跑
  3. o 键：如果是 --watch 默认就会自动进入 o 模式，只会跑当前修改的文件里面的测试用例，其他文件的不会再跑
           如果是 --watchAll 默认是全跑，使用时必须和 git 结合使用，否则会报错，因为 Jest 不知道哪些文件有修改
  4. a 键：和 o 键是相反的，o 是 --watch，a 是 --watchAll
  5. p 键：只有在 --watchAll 时才会出现，会根据我们输入的名字或正则去跑对应的测试用例，默认是全跑
  6. t 键：会根据我们输入的名字或正则去跑对应的测试用例
  7. q 键：退出当前的 --watch，相当于结束
  8. enter 键：重新执行所有的测试用例
----------------------------------------------------------------------------------------------
// 匹配器
1. toBe 相当于 js 中的 ===
  test('测试内容是否相等', () => {
    expect({ name: 'cj' }).toBe({ name: 'cj'}) // 不通过
  })
2. toEqual 相当于 js 中的 ==
  test('测试内容是否相等', () => {
    expect({ name: 'cj' }).toEqual({ name: 'cj'}) // 通过
  })
3. toBeNull 判断内容是否是 null
  test('测试内容是否是 null', () => {
    expect(null).toBeNull() // 通过，不需要参数
  })
4. toBeUndefined 判断内容是否是 undefined
  test('测试内容是否是 undefined', () => {
    expect(undefined).toBeUndefined() // 通过，不需要参数
  })
5. toBeDefined 判断内容是否是已定义
  test('测试内容是否是 defined', () => {
    const name = undefined
    expect(name).toBeDefined() // 不通过，不需要参数，当前 name 是未定义
  })
6. toBeTruthy 判断内容是否是 true
  test('测试内容是否是 true', () => {
    expect(true).toBeTruthy() // 通过，不需要参数
  })
7. toBeFalsy 判断内容是否是 false
  test('测试内容是否是 false', () => {
    expect(false).toBeFalsy() // 通过，不需要参数
  })
8. not 取反
  test('测试内容是否是 true', () => {
    expect(false).not.toBeTruthy() // 通过，不需要参数
  })
9. toBeGreaterThan 判断 Number 内容是否比实际值大
  test('测试内容是否比 9 大', () => {
    expect(10)toBeGreaterThan(9) // 通过 10 > 9
  })
10. toBeLessThan 判断 Number 内容是否比实际值小
  test('测试内容是否比 9 小', () => {
    expect(10)toBeLessThan(11) // 通过 11 > 10
  })
11. toBeGreaterThanOrEqual 判断 Number 内容是否比实际值大或相等
  test('测试内容是否大于等于 10', () => {
    expect(10)toBeGreaterThanOrEqual(10) // 通过
  })
12. toBeLessThanOrEqual 判断 Number 内容是否比实际值小或相等
  test('测试内容是否小于等于 10', () => {
    expect(10)toBeLessThanOrEqual(10) // 通过
  })
13. toBeCloseTo 判断 Number 数值是否相等（特别是小数）
  test('测试数值是否相等', () => {
    const num1 = 0.1
    const num2 = 0.2
    expect(num1 + num2)toBeCloseTo(0.3) // 通过，如果使用 toEqual 则不通过，js 计算小数时会有误差
  })
14. toMatch 判断 String 内容是否包含实际的值
  test('测试内容是否包含实际的值', () => {
    const name = 'chenj'
    expect(name)toMatch('chen') // 通过，也可以传入正则
  })
15. toContain 判断 Array or Set 内容是否包含实际的值
  test('测试内容是否包含实际的值', () => {
    const arr = ['chen', 'jie']
    const data = new Set(arr)
    expect(arr or data)toContain('chen') // 通过
  })
16. toThrow 判断是否抛出异常
  test('测试内容是否抛出异常', () => {
    const throwErrorFn = () => {
      throw new Error('这是一个错误')
    }
    expect(throwErrorFn)toThrow('这是一个错误') // 通过，如果不传入字符串也可以通过，如果传入的字符串不是和 new Error 里面抛出的信息一致则不通过
  })
```