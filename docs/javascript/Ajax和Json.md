---
title: Ajax和Json
date: 2020-07-04
---

```js
// ajax是什么
1. ajax是一种在无需要重新加载整个网页的情况下,能够更新部分网页的技术
----------------------------------------------------------------------------------------------
// ajax的优点
1. 通过异步模式,提升了用户体验
2. 优化了浏览器和服务器之间的传输,减少了不必要的数据往返,减少了带宽占用
3. ajax引擎在客户端运行,承担了一部分本来由服务器承担的工作,从而减少了大用户量下的服务器负载
----------------------------------------------------------------------------------------------
// ajax的缺点
1. 不支持浏览器的back按钮
2. 安全问题,ajax暴露了与服务器交互的细节
3. 对搜索引擎的支持比较弱
----------------------------------------------------------------------------------------------
// XMLHttpResquest是ajax的核心
1. 向服务器提出请求
2. 在页面加载后进行页面的局部更新
----------------------------------------------------------------------------------------------
// 如何使用XMLHttpResquest
1. 创建XMLHttpResquest对象,也就是创建一个异步调用对象
2. 创建一个新的HTTP请求,再指定该HTTP请求方法、url
3. 设置响应HTTP请求状态变化的函数
4. 发送HTTP请求
5. 获取异步调用返回数据
6. 使用js和DOM实现局部刷新
----------------------------------------------------------------------------------------------
// json是什么
1. json全称是js对象表示法,它是一种数据交换的文本格式
2. 不是一种编程语言,用于读取结构化数据,目的是取代繁琐的xml
----------------------------------------------------------------------------------------------
// 支持语法
1. 简单值: 字符串、数值、布尔值、null,字符串以双引号表示,数值以十进制表示
2. 对象
3. 数组
4. 不支持undefiend
----------------------------------------------------------------------------------------------
// 方法
1. JSON.parse(参数) // 用于将JSON字符串转化成对象
2. JSON.stringify(参数) // 用于将对象转化成JSON字符串
----------------------------------------------------------------------------------------------
// ajax演示
var request = new XMLHttpRequest
request.open('post', url, true) // 创建请求,true为异步
request.setRequestHeader('content-type', 'application/json') // post请求要写请求头
request.send('name=cj&age=23') // 发送请求
request.onreadystatechange = function() {
  if (request.readystate === 4 && request.status === 200) {
    console.log(JSON.parse(request.responeText))
  }
}
----------------------------------------------------------------------------------------------
// request的属性
1. request.responseText // 获取字符串形式的响应数据
2. request.responseXml // 获取xml形式的响应数据
3. request.status // 数字,状态码
4. request.statusText // 文本,状态码
5. request.getAllResponseHeader() // 获取所有的响应报头
6. request.getResponseHeader() // 获取某个的响应报头
----------------------------------------------------------------------------------------------
// request.readystate
1. 0(未初始化)还没有调用send()方法
2. 1(载入)已调用send()方法,正在发送请求
3. 2(载入完成)send()方法执行完成,已经接收全部响应内容
4. 3(交互)正在解析响应内容
5. 4(完成)响应内容解析完成,可以在客户端调用
----------------------------------------------------------------------------------------------
// request.status
1. 1xx: 服务器收到请求
2. 2xx: 表示成功处理请求,如200
3. 3xx: 需要重定向,浏览器直接跳转,301表示永久重定向,302表示临时重定向,304表示资源未改变(缓存)
4. 4xx: 客户端请求错误,404表示资源找不到,403表示没有权限
5. 5xx: 服务器端错误,504表示网关超时,500表示服务器错误
----------------------------------------------------------------------------------------------
// 其他
1. fetch是xmlHttRequest的下一代
```
